<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>HTML, CSS, JavaScript</title>
  </head>

  <body>
    <main class="container">
      <section class="section section_1">Section 1</section>
      <section class="section section_2">Section 2</section>
      <section class="section section_3">Section 3</section>
    </main>

    <script>
      const section = document.querySelector('.section_2');
      let currentY = section.getBoundingClientRect().y;
      let prevY = section.getBoundingClientRect().y;

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            const {
              target,
              isIntersecting,
              intersectionRatio,
              intersectionRect,
              boundingClientRect
            } = entry;
            
            currentY = boundingClientRect.y;

            if( currentY < prevY ) {
              console.log('scrolling down')
            } 

            if( currentY > prevY ) {
              console.log('scroll up')
            }
            prevY = currentY;
          });
        },
        {
          threshold: buildThreshold(100),
        }
      );

      observer.observe(section);
      function buildThreshold(steps) {
        return new Array(steps).fill(0).map((_, idx) => idx / steps);
      }
    </script>
  </body>
</html>
